entities:

# The `ControlSystem` entity can call `LightsGPIO`.
- name: traffic_light.ControlSystem
  connections:
  - target: traffic_light.ModeChecker
    id: mode_checker_connection
#  - target: traffic_light.Exchange
#    id: cs_exchange_connection
@INIT_ControlSystem_ENTITY_CONNECTIONS@

# `ModeChecker` entity can call `LightsGPIO`.
- name: traffic_light.ModeChecker
  connections:
  - target: traffic_light.LightsGPIO
    id: lights_gpio_connection
@INIT_ModeChecker_ENTITY_CONNECTIONS@

# HWDiag entity can call ControlSystem
- name: traffic_light.HardwareDiagnostic
  connections:
    - target: traffic_light.ControlSystem
      id: diag_cs_connection
@INIT_HardwareDiagnostic_ENTITY_CONNECTIONS@

# The `LightsGPIO` entity can only respond to requests.
- name: traffic_light.LightsGPIO
  connections:
    - target: traffic_light.HardwareDiagnostic
      id: gpio_diag_connection
@INIT_LightsGPIO_ENTITY_CONNECTIONS@

# 'Exchange' entity
- name: traffic_light.Exchange
  connections:
  - target: kl.VfsNet
    id: kl.VfsNet
#  connections:
#    - target: traffic_light.ControlSystem
#      id: exchange_cs_connection
@INIT_Exchange_ENTITY_CONNECTIONS@
  
@INIT_EXTERNAL_ENTITIES@
